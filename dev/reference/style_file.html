<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Style files with R source code — style_file • styler</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Style files with R source code — style_file"><meta name="description" content="Performs various substitutions in the files specified.
Carefully examine the results after running this function!"><meta property="og:description" content="Performs various substitutions in the files specified.
Carefully examine the results after running this function!"><meta property="og:image" content="https://styler.r-lib.org/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">styler</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.10.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/styler.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/detect-alignment.html">Alignment detection</a></li>
    <li><a class="dropdown-item" href="../articles/strict.html">The effect of `strict = FALSE`</a></li>
    <li><a class="dropdown-item" href="../articles/third-party-integrations.html">Third-party integrations</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developers</h6></li>
    <li><a class="dropdown-item" href="../articles/remove_rules.html">Remove rules</a></li>
    <li><a class="dropdown-item" href="../articles/customizing_styler.html">Customizing styler</a></li>
    <li><a class="dropdown-item" href="../articles/distribute_custom_style_guides.html">Distribute custom style guides</a></li>
    <li><a class="dropdown-item" href="../articles/caching.html">Caching</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2017/12/styler-1.0.0/">Version 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/11/styler-1-2-0/">Version 1.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://lorenzwalthert.netlify.com/post/styler-1-3-0/">Version 1.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://lorenzwalthert.netlify.app/post/styler-1-4-0/">Version 1.4.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/styler/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Style files with R source code</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/styler/blob/main/R/ui-styling.R" class="external-link"><code>R/ui-styling.R</code></a></small>
      <div class="d-none name"><code>style_file.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Performs various substitutions in the files specified.
Carefully examine the results after running this function!</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">style_file</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  style <span class="op">=</span> <span class="va">tidyverse_style</span>,</span>
<span>  transformers <span class="op">=</span> <span class="fu">style</span><span class="op">(</span><span class="va">...</span><span class="op">)</span>,</span>
<span>  include_roxygen_examples <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  base_indention <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  dry <span class="op">=</span> <span class="st">"off"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>A character vector with paths to files to style. Supported
extensions: <code>.R</code>, <code>.Rmd</code>, <code>.Rmarkdown</code>, <code>.qmd</code> and <code>.Rnw</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to the <code>style</code> function,
see <code><a href="tidyverse_style.html">tidyverse_style()</a></code> for the default argument.</p></dd>


<dt id="arg-style">style<a class="anchor" aria-label="anchor" href="#arg-style"></a></dt>
<dd><p>A function that creates a style guide to use, by default
<code><a href="tidyverse_style.html">tidyverse_style</a></code>. Not used
further except to construct the argument <code>transformers</code>. See
<code><a href="style_guides.html">style_guides()</a></code> for details.</p></dd>


<dt id="arg-transformers">transformers<a class="anchor" aria-label="anchor" href="#arg-transformers"></a></dt>
<dd><p>A set of transformer functions. This argument is most
conveniently constructed via the <code>style</code> argument and <code>...</code>. See
'Examples'.</p></dd>


<dt id="arg-include-roxygen-examples">include_roxygen_examples<a class="anchor" aria-label="anchor" href="#arg-include-roxygen-examples"></a></dt>
<dd><p>Whether or not to style code in roxygen
examples.</p></dd>


<dt id="arg-base-indention">base_indention<a class="anchor" aria-label="anchor" href="#arg-base-indention"></a></dt>
<dd><p>Integer scalar indicating by how many spaces the whole
output text should be indented. Note that this is not the same as splitting
by line and add a <code>base_indention</code> spaces before the code in the case
multi-line strings are present. See 'Examples'.</p></dd>


<dt id="arg-dry">dry<a class="anchor" aria-label="anchor" href="#arg-dry"></a></dt>
<dd><p>To indicate whether styler should run in <em>dry</em> mode, i.e. refrain
from writing back to files .<code>"on"</code> and <code>"fail"</code> both don't write back, the
latter returns an error if the input code is not identical to the result
of styling. "off", the default, writes back if the input and output of
styling are not identical.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="encoding">Encoding<a class="anchor" aria-label="anchor" href="#encoding"></a></h2>


<p>UTF-8 encoding is assumed. Please convert your code to UTF-8 if necessary
before applying styler.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>


<p>Invisibly returns a data frame that indicates for each file considered for
styling whether or not it was actually changed (or would be changed when
<code>dry</code> is not "off").</p>
    </div>
    <div class="section level2">
    <h2 id="warning">Warning<a class="anchor" aria-label="anchor" href="#warning"></a></h2>


<p>This function overwrites files (if styling results in a change of the
code to be formatted and <code>dry = "off"</code>). It is strongly suggested to only
style files that are under version control or to create a backup copy.</p>
<p>We suggest to first style with <code>scope &lt; "tokens"</code> and inspect and commit
changes, because these changes are guaranteed to leave the abstract syntax
tree (AST) unchanged. See section 'Round trip validation' for details.</p>
<p>Then, we suggest to style with <code>scope = "tokens"</code> (if desired) and carefully
inspect the changes to make sure the AST is not changed in an unexpected way
that invalidates code.</p>
    </div>
    <div class="section level2">
    <h2 id="round-trip-validation">Round trip validation<a class="anchor" aria-label="anchor" href="#round-trip-validation"></a></h2>


<p>The following section describes when and how styling is guaranteed to
yield correct code.</p>
<p>If tokens are not in the styling scope (as specified with the <code>scope</code>
argument), no tokens are changed and the abstract syntax tree (AST) should
not change.
Hence, it is possible to validate the styling by comparing whether the parsed
expression before and after styling have the same AST.
This comparison omits roxygen code examples and comments. styler throws an
error if the AST has changed through styling.</p>
<p>Note that if tokens are to be styled, such a comparison is not conducted because
the AST might well change and such a change is intended. There is no way
styler can validate styling, that is why we inform the user to carefully
inspect the changes.</p>
<p>See section 'Warning' for a good strategy to apply styling safely.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other stylers:
<code><a href="style_dir.html">style_dir</a>()</code>,
<code><a href="style_pkg.html">style_pkg</a>()</code>,
<code><a href="style_text.html">style_text</a>()</code>,
<code><a href="styler_addins.html">styler_addins</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"styler"</span>, fileext <span class="op">=</span> <span class="st">".R"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="st">"1++1"</span>, <span class="va">file</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the following is identical (because of ... and defaults),</span></span></span>
<span class="r-in"><span><span class="co"># but the first is most convenient:</span></span></span>
<span class="r-in"><span><span class="fu">style_file</span><span class="op">(</span><span class="va">file</span>, strict <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Styling  1  files:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  /tmp/Rtmp1XbVom/styler1d266e39e99e.R <span style="color: #00BBBB;">ℹ</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Status	Count	Legend </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> 	0	File unchanged.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> 	1	File changed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> 	0	Styling threw an error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Please review the changes carefully!</span>
<span class="r-in"><span><span class="fu">style_file</span><span class="op">(</span><span class="va">file</span>, style <span class="op">=</span> <span class="va">tidyverse_style</span>, strict <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Styling  1  files:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  /tmp/Rtmp1XbVom/styler1d266e39e99e.R <span style="color: #00BB00;">✔</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Status	Count	Legend </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> 	1	File unchanged.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> 	0	File changed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> 	0	Styling threw an error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-in"><span><span class="fu">style_file</span><span class="op">(</span><span class="va">file</span>, transformers <span class="op">=</span> <span class="fu"><a href="tidyverse_style.html">tidyverse_style</a></span><span class="op">(</span>strict <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Styling  1  files:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  /tmp/Rtmp1XbVom/styler1d266e39e99e.R <span style="color: #00BB00;">✔</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Status	Count	Legend </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> 	1	File unchanged.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> 	0	File changed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> 	0	Styling threw an error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># only style indention and less invasive  levels (i.e. spaces)</span></span></span>
<span class="r-in"><span><span class="fu">style_file</span><span class="op">(</span><span class="va">file</span>, scope <span class="op">=</span> <span class="st">"indention"</span>, strict <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Styling  1  files:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  /tmp/Rtmp1XbVom/styler1d266e39e99e.R <span style="color: #00BB00;">✔</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Status	Count	Legend </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> 	1	File unchanged.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> 	0	File changed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> 	0	Styling threw an error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-in"><span><span class="co"># name levels explicitly to not style less invasive levels</span></span></span>
<span class="r-in"><span><span class="fu">style_file</span><span class="op">(</span><span class="va">file</span>, scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tokens"</span>, <span class="st">"spaces"</span><span class="op">)</span><span class="op">)</span>, strict <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Styling  1  files:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  /tmp/Rtmp1XbVom/styler1d266e39e99e.R <span style="color: #00BB00;">✔</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Status	Count	Legend </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> 	1	File unchanged.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> 	0	File changed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> 	0	Styling threw an error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1 + +1"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, <a href="https://lorenzwalthert.com" class="external-link">Lorenz Walthert</a>, <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

