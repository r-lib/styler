<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alignment detection • styler</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Alignment detection">
<meta property="og:description" content="styler">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">styler</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.4.1.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/styler.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/detect-alignment.html">Alignment detection</a>
    </li>
    <li>
      <a href="../articles/strict.html">The effect of `strict = FALSE`</a>
    </li>
    <li>
      <a href="../articles/third-party-integrations.html">Third-party integrations</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Developers</li>
    <li>
      <a href="../articles/caching.html">Caching</a>
    </li>
    <li>
      <a href="../articles/customizing_styler.html">Customizing styler</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Releases</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2017/12/styler-1.0.0/">Version 1.0.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2019/11/styler-1-2-0/">Version 1.2.0</a>
    </li>
    <li>
      <a href="https://lorenzwalthert.netlify.com/post/styler-1-3-0/">Version 1.3.0</a>
    </li>
    <li>
      <a href="https://lorenzwalthert.netlify.app/post/styler-1-4-0/">Version 1.4.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/styler/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="detect-alignment_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Alignment detection</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/styler/blob/master/vignettes/detect-alignment.Rmd"><code>vignettes/detect-alignment.Rmd</code></a></small>
      <div class="hidden name"><code>detect-alignment.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>Sometimes, you deliberately align code to make it more readable.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/call.html">call</a></span><span class="op">(</span>
  a   <span class="op">=</span>       <span class="fl">3</span>,
  bre <span class="op">=</span> <span class="fl">3213232</span>
<span class="op">)</span></code></pre></div>
<p>Until styler 1.1.1.9002 (with <code>strict = TRUE</code>, e.g. as in <code><a href="../reference/style_file.html">styler::style_file(..., strict = TRUE)</a></code>), this was formatted as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/call.html">call</a></span><span class="op">(</span>
  a <span class="op">=</span> <span class="fl">3</span>,
  bre <span class="op">=</span> <span class="fl">3213232</span>
<span class="op">)</span></code></pre></div>
<p>because no alignment detection was built in.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>styler &gt;= 1.1.1.9003 detects aforementioned alignment for function calls. This vignette describes how aligned code is defined in styler and gives some examples so users can format their aligned code to match the definition styler uses to ensure their code is not unintentionally reformatted.</p>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<p>These typical examples match <em>styler</em>’s definition of alignment. Note the spacing around operators and commas.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span>
  <span class="op">~</span><span class="va">key_here</span>,  <span class="op">~</span><span class="va">value_here</span>,
  <span class="st">"left"</span>,         <span class="st">"right"</span>, <span class="co"># comments are allowed</span>
  <span class="st">"long string"</span>,   <span class="st">"shrt"</span> <span class="co"># columns can overlap ('~' above ',')</span>
<span class="op">)</span>

<span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, <span class="co"># arguments on same line as opening brace are not considered</span>
  arg2 <span class="op">=</span>       <span class="fl">2</span>,
  ar   <span class="op">=</span> <span class="fu">f</span><span class="op">(</span><span class="va">k</span>, <span class="va">x</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, <span class="co"># arguments on same line as opening brace are not considered</span>
  arg2 <span class="op">=</span> <span class="fl">2</span>,
  ar   <span class="op">=</span> <span class="fu">f</span><span class="op">(</span><span class="va">k</span>, <span class="va">x</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="details" class="section level1">
<h1 class="hasAnchor">
<a href="#details" class="anchor"></a>Details</h1>
<p>An important definition used in the remainder is the one of a <strong>column</strong>. All arguments of a function call that have the same position but are placed on different lines form a column. The below call shows a call with two columns and two rows. Columns separate arguments of the function call, so the separator is the comma. The first row is named because all arguments are named, the second is unnamed:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/call.html">call</a></span><span class="op">(</span>
  <span class="co"># column 1  | column 2 |</span>
  abkj <span class="op">=</span> <span class="fu">f</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>, <span class="fl">7</span>,
  more_ <span class="op">=</span> <span class="st">"a"</span>, <span class="fl">2</span> <span class="co"># more</span>
<span class="op">)</span></code></pre></div>
<div id="function-calls" class="section level2">
<h2 class="hasAnchor">
<a href="#function-calls" class="anchor"></a>Function calls</h2>
<p>Below, we try to explain in an intuitive way how your code should look like to be recognized as aligned.</p>
<p><strong>If all arguments in the first column are named</strong>:</p>
<p>Make commas match position vertically and align everything right before commas:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># all arguments of first column named -&gt; must right align values after `=`,</span>
<span class="co"># one or more spaces around `=`, none before and at least one after the comma.</span>
<span class="co"># aligned if the (imaginary) comma on the last line is in line with the commas</span>
<span class="fu">fell</span><span class="op">(</span>
  x  <span class="op">=</span>    <span class="fl">1</span>,
  y  <span class="op">=</span>   <span class="fl">23</span>,
  zz <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span>

<span class="co"># this works also with more than one column</span>
<span class="fu">fell</span><span class="op">(</span>
  x  <span class="op">=</span>    <span class="fl">1</span>, annoying <span class="op">=</span>       <span class="fl">3</span>,
  y  <span class="op">=</span>   <span class="fl">23</span>, <span class="co"># nothing in column 2 for row 2</span>
  zz <span class="op">=</span> <span class="cn">NULL</span>, finally  <span class="op">=</span> <span class="st">"stuff"</span>
<span class="op">)</span></code></pre></div>
<p>… or match position of <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code> vertically and align everything after this operator left</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># all arguments of first column named -&gt; must left align values after `=`,</span>
<span class="co"># at least one space before `=`, exactly one after, none before and at least one</span>
<span class="co"># after the comma.</span>
<span class="co"># aligned if the first values after `=` are aligned (and exactly one space after</span>
<span class="co"># `=`)</span>
<span class="fu">fell</span><span class="op">(</span>
  x <span class="op">=</span> <span class="fl">1</span>,
  y <span class="op">=</span> <span class="fl">23</span>,
  zz <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span>

<span class="co"># this works also with more than one column</span>
<span class="fu">fell</span><span class="op">(</span>
  x <span class="op">=</span> <span class="fl">1</span>, annoying <span class="op">=</span> <span class="fl">3</span>,
  y <span class="op">=</span> <span class="fl">23</span>, <span class="co"># nothing in column 2 for row 2</span>
  zz <span class="op">=</span> <span class="cn">NULL</span>, finally <span class="op">=</span> <span class="st">"stuff"</span>
<span class="op">)</span></code></pre></div>
<p><strong>If not all arguments of the first column are named:</strong><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> The same as above, but the first column is ignored.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># not all arguments of first column named, hence, all (except the first</span>
<span class="co"># column's) commas must match position</span>
<span class="fu">gell</span><span class="op">(</span>
  p <span class="op">=</span> <span class="fl">2</span>,   g <span class="op">=</span> <span class="fu">gg</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,  n <span class="op">=</span> <span class="fl">3</span> <span class="op">*</span> <span class="fl">3</span>, <span class="co">#</span>
  <span class="fl">31</span>,    fds <span class="op">=</span>    <span class="op">-</span><span class="fl">1</span>, gz <span class="op">=</span> <span class="va">f</span> <span class="op">/</span> <span class="fl">3</span>,
<span class="op">)</span>

<span class="co"># or all (except the first column's) `=` must match position</span>
<span class="fu">gell</span><span class="op">(</span>
  p <span class="op">=</span> <span class="fl">2</span>, g <span class="op">=</span> <span class="fu">gg</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, n <span class="op">=</span> <span class="fl">3</span> <span class="op">*</span> <span class="fl">3</span>, <span class="co">#</span>
  <span class="fl">31</span>, fds <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, gz <span class="op">=</span> <span class="va">f</span> <span class="op">/</span> <span class="fl">3</span> <span class="op">+</span> <span class="fl">1</span>,
<span class="op">)</span></code></pre></div>
</div>
<div id="comments" class="section level2">
<h2 class="hasAnchor">
<a href="#comments" class="anchor"></a>Comments</h2>
<p>not supported yet.</p>
</div>
<div id="assignment" class="section level2">
<h2 class="hasAnchor">
<a href="#assignment" class="anchor"></a>Assignment</h2>
<p>not supported yet.</p>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>With <code>strict = FALSE</code>, the spacing would have been kept, however, <code>strict = FALSE</code> has a number of other implications because it is in general less invasive. For example, it would not add braces and line breaks to “if (TRUE) return()”.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>In the below example, the first argument of the first column is named (<code>p = 2</code>). The second argument of the first column is not (<code>31</code>).<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://krlmlr.info">Kirill Müller</a>, <a href="https://lorenzwalthert.com">Lorenz Walthert</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '13580d327d8a7159f83a7cff178d2141',
    indexName: 'r-lib_styler',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
